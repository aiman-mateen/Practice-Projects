<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout</title>

    <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr"
    crossorigin="anonymous"
  />
  
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <link rel="icon" type="image/x-icon" href="https://cdn-icons-png.flaticon.com/512/882/882720.png">
</head>

<style>

    .navbar{
        display: flex;
        justify-content: center;
        align-items: center;
        position: relative;
        padding: 20px;
        border-bottom: 1px solid rgb(227, 226, 226);
    }
    .navbar img {
        width: 50px;
        height: 50px;
    }

    .cart-icon{
        position: absolute;
        right: 50px;
    }

    .cart-icon i{
        font-size: 20px;
        cursor: pointer;
        color: #ff6d00;
    }

    #email{
        padding: 8px;
    }

    #login-link{
        color: #ff6d00;
    }

    .delivery{
        margin-top: 25px;
    }

    input[type="checkbox"]{
        width: 18px;
        height: 18px;
        vertical-align: middle;
        margin-right: 8px;
        accent-color: #ff6d00 !important;
        cursor: pointer;
    }

    input[type="radio"] {
        width: 18px;
        height: 18px;
        border-radius: 50%;
        display: inline-block;
        position: relative;
        cursor: pointer;
        outline: none;
    }


    input[type="radio"]:checked {
        background-color: rgb(245, 101, 5);
        border-color: orange;
    }


    input[type="radio"]:checked::after {
        content: "";
        width: 5px;
        height: 5px;
        background: white;
        border-radius: 50%;
        position: absolute;
        top: 4px;
        left: 4px;
    }


    label{
        cursor: pointer;
    }

    #first-name, #last-name, #address, #apartment,
    #city, #postal-code, #phone{
        padding: 8px;
    }

    #shipping{
        border: 1px solid #ff6d00;
        background-color: #fff3ec;
        border-radius: 8px;
        padding: 4px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .shippingText{
        margin: 4px;
    }

    .phone-contact i{
        cursor: pointer;
    }

    .payment, .billing{
        border: 1px solid #e9e7e7;
        border-radius: 12px;
        overflow: hidden;
    }

    .optionCard-row.selected {
        border: 1px solid #ff6d00;
        background-color: #fff3ec; 
    }

    .optionCard-row {
        border-bottom: 1px solid #ddd;
        padding: 12px 8px;
        margin: 0;
        transition:  box-shadow 0.2s;
    }

    .optionCard-row input{
        cursor: pointer;
    }

    .optionCard-row label{
        width: 100%;
        cursor: pointer;
    }

    .optionCard-row:last-child {
        border-bottom: none;  
    }


    .paynow-btn{
        width: 100%;
        padding: 6px;
        border-radius: 5px;
        border: none;
        background: #ff6d00;
        color: white;
    }

    .paynow-btn:hover{
        background: #bb5a10;
    }

    .contactlinks-ul{
        display: flex;
        gap: 10px;
    }

    .contactlinks{
        color: #ff6d00;
        list-style: none;
    }

    .contactlinks-li{
        font-size: 12px;
    }

</style>
<body>
    <nav>
        <div class="navbar">
            <a href="Xiaomi.html"><img src="https://cdn.shopify.com/s/files/1/0231/3627/2464/files/Xiaomi-New-Logo-760x490-1_x320_9a163a4e-b92a-4974-9f1d-fe885a4a2372_x320.png?v=1748598711" alt="logo" class="img-fluid"></a>

            <div class="cart-icon d-flex justify-content-end">
                <a href="cart.html"><i class="bi bi-bag"></i></a>
            </div>
        </div>
    </nav>


    <div class="container">
        <div class="row justify-content-center">

            <div class="col-lg-6 p-2">
                <div class="card">
                    <div class="card-body">
                        <div class="card-title d-flex justify-content-between">
                            <h5 class="fw-bold contact-heading">Contact</h5>
                            <a href="xiaomiAccount.html" id="login-link">Log in</a>
                        </div>

                        <section class="email-section my-3">
                                <input type="text" placeholder="Email" id="email" class="form-control" required>
                            <div class="email-checkbox"> 
                                <input type="checkbox" name="email-alerts" id="email-alerts">
                                <label for="email-alerts" class="mt-2">Email me with news and offers</label>
                            </div>
                        </section>

                        <div class="card-title delivery">
                            <h5 class="fw-bold contact-heading">Delivery</h5>

                            <label class="form-label fw-semibold mt-2">Country</label>
                            <select id="form-select" class="form-select" required>
                                <option value="0">Select Country</option>
                                <option value="AF">Afghanistan</option>
                                <option value="AL">Albania</option>
                                <option value="DZ">Algeria</option>
                                <option value="AS">American Samoa</option>
                                <option value="AO">Angola</option>
                                <option value="AI">Anguilla</option>
                                 <option value="PK">Pakistan</option>
                            </select>
                        </div>

                        <div class="row my-3 name-section">
                            <div class="col-md-6">
                                <input type="text" placeholder="First Name" id="first-name" class="form-control" required>
                            </div>
                            <div class="col-md-6">
                                <input type="text" placeholder="Last Name" id="last-name" class="form-control" required>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-12">
                                <input type="text" placeholder="Address" id="address" class="form-control" required>
                            </div>
                            <div class="col-12 mt-3">
                                <input type="text" placeholder="Apartment, suite, etc. (optional)" id="apartment" class="form-control">
                            </div>
                        </div>

                        <div class="row mt-3">
                            <div class="col-md-6">
                                <input type="text" placeholder="City" id="city" class="form-control" required>
                            </div>
                            <div class="col-md-6">
                                <input type="text" placeholder="Postal Code (optional)" id="postal-code" class="form-control">
                            </div>
                        </div>

                        <div class="row mt-3">
                            <div class="col-12">
                              <div class="d-flex align-items-center my-2 phone-contact">  
                                <input type="tel" placeholder="Phone" class="form-control" id="phone" required>
                                <i class="bi bi-question-circle ms-2 text-muted" data-bs-toggle="tooltip" title="In case we need to contact you about  your order"></i>
                              </div>  
                                <input type="checkbox" name="save-info" id="save-info">
                                <label for="save-info">Save this information for next time</label>
                            </div>
                        </div>

                        <div class="card-title mt-4">
                            <h5 class="fw-semibold my-3">Shipping method</h5>
                            <div class="col-12" id="shipping">
                                <p class="shippingText">Standard Delivery Time is 2 to 3 Working Days</p>
                                <p class="fw-bold shippingText">Rs 190.00</p>
                            </div>
                        </div>

                         <div class="card-title mt-4">
                            <h5 class="fw-semibold mb-2">Payment</h5>
                            <p>All transactions are secure and encrypted</p>

                            <!-- <div class="container"> -->

                            <div class="payment">
                                <div class="optionCard-row">
                                <label class="option-card form-check mb-2 active">
                                    <div class="d-flex align-items-start justify-content-between w-100">
                                    <div class="d-flex align-items-start gap-2">
                                        <input class="form-check-input mt-1" type="radio" name="payment" id="pay-bnpl" checked>
                                        <div>
                                        <div class="fw-semibold">(Bank Alfalah) Buy Now Pay Later</div>
                                        <div class="small text-muted text-center p-3">
                                            After clicking “Pay now”, you will be redirected to (Bank Alfalah) Buy Now Pay Later
                                            to complete your purchase securely.
                                        </div>
                                        </div>
                                    </div>
                                    <img src="https://cdn.shopify.com/shopifycloud/checkout-web/assets/c1/assets/visa.sxIq5Dot.svg" alt="visa" style="height:20px">
                                    </div>
                                </label>
                                </div>

                                <div class="optionCard-row">
                                    <label class="option-card form-check mb-2">
                                            <div class="d-flex align-items-center justify-content-between w-100">
                                            <div class="d-flex align-items-center gap-2">
                                                <input class="form-check-input" type="radio" name="payment" id="pay-payfast">
                                                <div>PAYFAST (Pay via Debit/Credit/Wallet/Bank Account)</div>
                                            </div>
                                            <div class="d-flex align-items-center gap-2">
                                                <img src="https://cdn.shopify.com/shopifycloud/checkout-web/assets/c1/assets/visa.sxIq5Dot.svg" alt="visa" style="height:20px">
                                                <img src="https://cdn.shopify.com/shopifycloud/checkout-web/assets/c1/assets/master.CzeoQWmc.svg" alt="mc" style="height:20px">
                                                <img src="https://cdn.shopify.com/shopifycloud/checkout-web/assets/c1/assets/unionpay.8M-Boq_z.svg" alt="unionpay" style="height:20px">
                                            </div>
                                            </div>
                                    </label>
                                </div>

                                <div class="optionCard-row">
                                    <label class="option-card form-check mb-2">
                                            <div class="d-flex align-items-center justify-content-between w-100">
                                            <div class="d-flex align-items-center gap-2">
                                                <input class="form-check-input" type="radio" name="payment" id="pay-payfast">
                                                <div>Cash on Delivery (COD)</div>
                                            </div>
                                            </div>
                                    </label>
                                </div>  

                                <div class="optionCard-row">
                                    <label class="option-card form-check mb-2">
                                            <div class="d-flex align-items-center justify-content-between w-100">
                                            <div class="d-flex align-items-center gap-2">
                                                <input class="form-check-input" type="radio" name="payment" id="pay-payfast">
                                                <div>Bank Deposit</div>
                                            </div>
                                            </div>
                                    </label>
                                </div>
                            </div>
                         </div>  
                            
                            <div class="card-title mt-4">
                                     <h5 class="fw-semibold mb-2">Billing address</h5>
                                
                                <div class="billing">
                                    <div class="optionCard-row">
                                     <label class="option-card form-check mb-2 active">
                                        <div class="d-flex align-items-start gap-2">
                                            <input class="form-check-input mt-1" type="radio" name="billing" id="bill-bnpl" checked>
                                        <div>
                                        <div>Same as shipping address</div>
                                        </div>
                                        </div>
                                     </label>
                                    </div>

                                    <div class="optionCard-row">
                                     <label class="option-card form-check mb-2 active">
                                        <div class="d-flex align-items-start gap-2">
                                            <input class="form-check-input mt-1" type="radio" name="billing" id="bill-bnpl">
                                        <div>
                                        <div>Use a different billing address</div>
                                        </div>
                                        </div>
                                     </label>
                                    </div>
                                </div> 
                            </div>

                            <div class="paynow mt-4">
                                <button class="paynow-btn">Pay now</button>
                            </div>

                            <hr>

                            <div class="links">
                                <ul class="contactlinks-ul d-flex">
                                    <a href="#" class="contactlinks"><li class="contactlinks-li">Refund Policy</li></a>
                                    <a href="#" class="contactlinks"><li class="contactlinks-li">Shipping</li></a>
                                    <a href="#" class="contactlinks"><li class="contactlinks-li">Privacy Policy</li></a>
                                    <a href="#" class="contactlinks"><li class="contactlinks-li">Terms of service</li></a>
                                </ul>
                            </div>
                </div>
            </div>
        </div>

        <div class="col-lg-6">
            <div class="orderSummary d-xl-none ">
                <h5 class="fw-semibold ms-2 my-3">Order summary</h5>
            </div>
            <div id="checkout-cart-items" class="my-4"></div>

             <div class="d-flex gap-2 mt-3">
                <input type="text" id="discount-code" class="form-control" placeholder="Discount code">
                <button class="btn btn-outline-dark" id="apply-discount">Apply</button>
            </div>
                <p id="discount-message" class="mt-2 small"></p>

                <div class="mt-3">
                    <div class="d-flex justify-content-between">
                        <span>Subtotal . <span id="total-items">0</span> items</span>
                        <span id="subtotal-price">Rs. 0</span>
                    </div>

                    <div class="d-flex justify-content-between">
                        <span>Shipping</span>
                        <span id="shipping-price">Rs. 190</span>
                    </div>

                    <div class="d-flex justify-content-between fw-bold mt-2">
                        <span>Total</span>
                        <span id="total-price">Rs. 0</span>
                    </div>
                </div>
        </div>
    </div>
</body>
</html>


<script>


    document.addEventListener("DOMContentLoaded", () => {

    // for payment method 
     document.querySelectorAll(".payment input[type='radio']").forEach((input) => {
             input.addEventListener("change", () => {
                document.querySelectorAll(".payment .optionCard-row").forEach((opt) =>
                opt.classList.remove("selected")
                );
                input.closest(".optionCard-row").classList.add("selected");
            });
    });

    const checkedPayment = document.querySelector(".payment input[type='radio']:checked");
        if (checkedPayment) {
                checkedPayment.closest(".optionCard-row").classList.add("selected");
        }

    // for billing method
     document.querySelectorAll(".billing input[type='radio']").forEach((input) => {
             input.addEventListener("change", () => {
                document.querySelectorAll(".billing .optionCard-row").forEach((opt) =>
                opt.classList.remove("selected")
                );
                input.closest(".optionCard-row").classList.add("selected");
            });
    });

    const checkedBilling = document.querySelector(".billing input[type='radio']:checked");
        if (checkedBilling) {
                checkedBilling.closest(".optionCard-row").classList.add("selected");
        } 
    const cart = JSON.parse(localStorage.getItem("cart")) || [];

    const summaryContainer = document.getElementById("checkout-cart-items");
    const subtotalEl = document.getElementById("subtotal-price");
    const totalEl = document.getElementById("total-price");
    const totalItemsEl = document.getElementById("total-items");

    let shipping = 190;
    let discountValue = 0;
    
    function renderSummary() {
    summaryContainer.innerHTML = "";
    let subtotal = 0;
    let totalItems = 0;

    cart.forEach((product, index) => {
      const priceNum = parseInt(product.price.toString().replace(/[^0-9]/g, ""));
      const quantity = product.quantity || 1;
      const totalForItem = priceNum * quantity;
      subtotal += totalForItem;
      totalItems += quantity;

      const row = document.createElement("div");
      row.classList.add("d-flex", "align-items-center", "justify-content-between", "mb-2");
      row.innerHTML = `
        <div class="d-flex align-items-center gap-2">
          <img src="${product.img}" alt="${product.title}" style="width:60px; height:60px; object-fit:cover; border-radius:8px;">
          <div>
            <div class="fw-semibold">${product.title}</div>
            <p>Quantity: ${product.quantity}</p>
          </div>
        </div>
        <div class="fw-bold">Rs. ${totalForItem.toLocaleString()}</div>
      `;

      summaryContainer.appendChild(row);
    });

    totalItemsEl.textContent = totalItems;
    subtotalEl.textContent = `Rs. ${subtotal.toLocaleString()}`;
    totalEl.textContent = `Rs. ${(subtotal - discountValue + shipping).toLocaleString()}`;
  }


        document.getElementById("apply-discount").addEventListener("click", () => {
        const code = document.getElementById("discount-code").value.trim().toLowerCase();
        const discountMessage = document.getElementById("discount-message");

        if (code === "xiaomi10") {
            discountValue = 1000;
            discountMessage.textContent = "✅ Discount applied: Rs. 1000";
            discountMessage.style.color = "green";
        } else {
            discountValue = 0;
            discountMessage.textContent = "❌ Invalid discount code";
            discountMessage.style.color = "red";
        }
        renderSummary();
        });

            renderSummary();

});

</script>